图片接口文档
====

> 在博客系统上开发，使用php作为开发语言，目前主要分为三个模块，权限校验模块，图片校验模块，图片存储模块

接口设计思路
----
#### 一. 权限校验模块

 1. 登录校验，登录校验不通过返回登录页面。
 2. Token校验不通过直接报错。

#### 二. 图片校验模块
1. 图片大小限制（2M）
2. 图片格式校验（jpg，jpeg，png，gif）
3. 是否重复校验（MD5）

#### 三. 图片存储模块
1. 存储路径及文件名生成
2. 图片元数据存储（包括图片路径，图片大小，长宽，MD5）
3. 图片内容存储

<br>
图片上传接口
----
|项目     | 内容                  |
|--------|:--------------------:|
|地址     | {hostname:port}/image |
|请求方式 |post                  |
|校验规则 |图片内容非空且小于2M <br> 图片格式校验仅支持jpg，jpeg，png，gif，必须是图片本来的格式为以上2种，改后缀名后上传同样不支持 <br> 通过图片内容生成的MD5以及像素作为唯一性限制，若重复上传直接返回原来的图片链接  |  
|图片存储规则 |{项目名}/{像素等级}/{图片内容MD5}.{图片真实后缀名} |
|存储内容 |图片内容存储在文件系统中，图片的元数据（图片名称，图片宽高，图片大小，图片内容MD5，图片存储路径）存储在数据库中 |

> 图片内容为空返回，图片太大，格式错误类似

```bash
{
    "code":"500",  
    "msg":"上传图片内容为空，请选择图片后重新上传！"  
}
  ```

> 图片已存在返回

```bash
{
    "statue":"true",  
    "msg":"图片已存在，不可重复上传，imagePath为图片存储路径。",
    "imagePath":"$imagePath"
}
  ```   

> 图片存储异常返回，图片元数据存储异常类似

```bash
{
  "code":"500",  
  "msg":"图片存储异常，请急忙呼叫管理员！"
}
```   

<br>
图片访问接口
----
|项目     | 内容                        |
|--------|:---------------------------:|
|地址     | {hostname:port}/image/{projectName}/{pixelLevel}/{imageName}    |
|请求方式 |get                     |

> 访问图片不存在返回

```bash
{
  "code":"500",  
  "msg":"不好意思呀，您所查看的图片不存在！"
}
```

<br>
```bash
相关依赖
php需要安装php_fileinfo.dll模块来获取文件的mime类型
```

```bash
像素等级规则
十万像素以下一个等级，此后每隔十万像素一个等级，到一百万像素后每隔一百万一个等级，九百万以上一个等级，共分为21个等级
```
